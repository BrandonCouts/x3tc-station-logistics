<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>plugin.sk.ecs.news.add</name>
<version>250</version>
<engineversion>43</engineversion>
<description>ECS - Newsfeed : Add a message to the list</description>
<arguments>
<argument index="1" name="plugin.id" type="Var/String" desc="Plugin ID" />
<argument index="2" name="news.title" type="Var/String" desc="News Title" />
<argument index="3" name="news.content" type="Var/String" desc="News Content" />
<argument index="4" name="news.from" type="Value" desc="from" />
</arguments>
<sourcetext>
<line linenr="001" indent=""><comment><text>*&#160;</text><var>===========================================</var></comment></line>
<line linenr="002" indent=""><comment><text>*&#160;</text><var>Extended&#160;Communication&#160;System&#160;2.5</var></comment></line>
<line linenr="003" indent=""><comment><text>*&#160;</text><var>===========================================</var></comment></line>
<line linenr="004" indent=""><comment><text>*&#160;</text><var>Use&#160;this&#160;function&#160;to&#160;add&#160;a&#160;news/message&#160;to&#160;the&#160;list.</var></comment></line>
<line linenr="005" indent=""><comment><text>*&#160;</text><var>===========================================</var></comment></line>
<line linenr="006" indent=""><comment><text>*&#160;</text><var>Parameter&#160;:</var></comment></line>
<line linenr="007" indent=""><comment><text>*&#160;</text><var>-&#160;plugin.id&#160;:&#160;The&#160;global&#160;variable&#160;you&#160;used&#160;to&#160;register&#160;(string)</var></comment></line>
<line linenr="008" indent=""><comment><text>*&#160;</text><var>-&#160;news.title&#160;:&#160;News&#160;Title</var></comment></line>
<line linenr="009" indent=""><comment><text>*&#160;</text><var>-&#160;news.content&#160;:&#160;Main&#160;text&#160;of&#160;the&#160;news</var></comment></line>
<line linenr="010" indent=""><comment><text>*&#160;</text><var>-&#160;news.from&#160;:&#160;Who&#160;is&#160;sending&#160;this&#160;message&#160;(optional)</var></comment></line>
<line linenr="011" indent=""><comment><text>*&#160;</text><var>===========================================</var></comment></line>
<line linenr="012" indent=""></line>
<line linenr="013" indent=""><var>$ecs.setup&#160;=&#160;</var><text>get&#160;global&#160;variable:&#160;name=</text><var>'plugin.ecs.setup'</var></line>
<line linenr="014" indent=""><var>$ecs.installed&#160;=&#160;</var><var>$ecs.setup</var><text>[</text><var>1</var><text>]</text></line>
<line linenr="015" indent=""><var>$ecs.configs&#160;=&#160;</var><var>$ecs.setup</var><text>[</text><var>2</var><text>]</text></line>
<line linenr="016" indent=""><var>$ecs.news&#160;=&#160;</var><var>$ecs.setup</var><text>[</text><var>5</var><text>]</text></line>
<line linenr="017" indent=""></line>
<line linenr="018" indent=""><var>skip&#160;if&#160;</var><text>&#160;find&#160;</text><var>$plugin.id</var><text>&#160;in&#160;array:&#160;</text><var>$ecs.installed</var></line>
<line linenr="019" indent="&#160;"><text>return&#160;</text><var>null</var></line>
<line linenr="020" indent=""><var>$index&#160;=&#160;</var><text>&#160;get&#160;index&#160;of&#160;</text><var>$plugin.id</var><text>&#160;in&#160;array&#160;</text><var>$ecs.installed</var><text>&#160;offset=</text><var>-1</var><text>&#160;+&#160;1</text></line>
<line linenr="021" indent=""></line>
<line linenr="022" indent=""><var>$my.config&#160;=&#160;</var><var>$ecs.configs</var><text>[</text><var>$index</var><text>]</text></line>
<line linenr="023" indent=""><var>$max.news.count&#160;=&#160;</var><var>$my.config</var><text>[</text><var>5</var><text>]</text></line>
<line linenr="024" indent=""><var>$news.list&#160;=&#160;</var><var>$ecs.news</var><text>[</text><var>$index</var><text>]</text></line>
<line linenr="025" indent=""></line>
<line linenr="026" indent=""></line>
<line linenr="027" indent=""><var>$my.news&#160;=&#160;</var><text>&#160;array&#160;alloc:&#160;size=</text><var>4</var></line>
<line linenr="028" indent=""><var>$my.news</var><text>[</text><var>0</var><text>]&#160;=&#160;</text><var>$news.title</var></line>
<line linenr="029" indent=""><var>$my.news</var><text>[</text><var>1</var><text>]&#160;=&#160;</text><var>$news.content</var></line>
<line linenr="030" indent=""><var>$my.news</var><text>[</text><var>2</var><text>]&#160;=&#160;</text><var>$news.from</var></line>
<line linenr="031" indent=""><var>$pl.time&#160;=&#160;</var><text>playing&#160;time</text></line>
<line linenr="032" indent=""><var>$my.news</var><text>[</text><var>3</var><text>]&#160;=&#160;</text><var>$pl.time</var></line>
<line linenr="033" indent=""><var>if&#160;</var><var>$news.list</var></line>
<line linenr="034" indent="&#160;"><text>insert&#160;</text><var>$my.news</var><text>&#160;into&#160;array&#160;</text><var>$news.list</var><text>&#160;at&#160;index&#160;</text><var>0</var></line>
<line linenr="035" indent=""><text>else</text></line>
<line linenr="036" indent="&#160;"><var>$news.list&#160;=&#160;</var><text>&#160;array&#160;alloc:&#160;size=</text><var>1</var></line>
<line linenr="037" indent="&#160;"><var>$news.list</var><text>[</text><var>0</var><text>]&#160;=&#160;</text><var>$my.news</var></line>
<line linenr="038" indent=""><text>end</text></line>
<line linenr="039" indent=""></line>
<line linenr="040" indent=""><var>$news.count&#160;=&#160;</var><text>&#160;size&#160;of&#160;array&#160;</text><var>$news.list</var></line>
<line linenr="041" indent=""><var>if&#160;</var><var>$news.count</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>$max.news.count</var></line>
<line linenr="042" indent="&#160;"><text>resize&#160;array&#160;</text><var>$news.list</var><text>&#160;to&#160;</text><var>$max.news.count</var></line>
<line linenr="043" indent=""><text>end</text></line>
<line linenr="044" indent=""></line>
<line linenr="045" indent=""></line>
<line linenr="046" indent=""><text>return&#160;</text><var>[TRUE]</var></line>
</sourcetext>
<codearray>

<sval type="array" size="10">
  <sval type="string" val="plugin.sk.ecs.news.add"/>
  <sval type="int" val="43"/>
  <sval type="string" val="ECS - Newsfeed : Add a message to the list"/>
  <sval type="int" val="250"/>
  <sval type="int" val="0"/>
  <sval type="array" size="15">
    <sval type="string" val="plugin.id"/>
    <sval type="string" val="news.title"/>
    <sval type="string" val="news.content"/>
    <sval type="string" val="news.from"/>
    <sval type="string" val="ecs.setup"/>
    <sval type="string" val="ecs.installed"/>
    <sval type="string" val="ecs.configs"/>
    <sval type="string" val="ecs.news"/>
    <sval type="string" val="index"/>
    <sval type="string" val="my.config"/>
    <sval type="string" val="max.news.count"/>
    <sval type="string" val="news.list"/>
    <sval type="string" val="my.news"/>
    <sval type="string" val="pl.time"/>
    <sval type="string" val="news.count"/>
  </sval>
  <sval type="array" size="25">
    <sval type="array" size="4">
      <sval type="int" val="158"/>
      <sval type="int" val="5"/>
      <sval type="string" val="plugin.ecs.setup"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="4"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1406"/>
      <sval type="int" val="-536869369"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="8">
      <sval type="int" val="1083"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="9"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
      <sval type="int" val="4"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="128"/>
      <sval type="int" val="12"/>
      <sval type="int" val="4"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="141"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="4"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610607869"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="134"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="128"/>
      <sval type="int" val="11"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610606589"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="137"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
  </sval>
  <sval type="array" size="4">
    <sval type="array" size="2">
      <sval type="int" val="11"/>
      <sval type="string" val="Plugin ID"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="11"/>
      <sval type="string" val="News Title"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="11"/>
      <sval type="string" val="News Content"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="from"/>
    </sval>
  </sval>
  <sval type="array" size="22">
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="==========================================="/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Extended Communication System 2.5"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="==========================================="/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Use this function to add a news/message to the list."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="==========================================="/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Parameter :"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="- plugin.id : The global variable you used to register (string)"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="- news.title : News Title"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="- news.content : Main text of the news"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="- news.from : Who is sending this message (optional)"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="==========================================="/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="0"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="7"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="19"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="21"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="21"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="24"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="24"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="24"/>
      <sval type="int" val="2"/>
    </sval>
  </sval>
  <sval type="int" val="0"/>
</sval>

</codearray>
</script>
